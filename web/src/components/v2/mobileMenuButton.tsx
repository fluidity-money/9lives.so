import { useState } from "react";
import Button from "./button";
import ReferralButton from "./referralButton";
import SimpleClaimAllButton from "./claimAllButton";
import Link from "next/link";
import useUnclaimedCampaigns from "@/hooks/useUnclaimedCampaigns";
import { useAppKitAccount } from "@reown/appkit/react";
const LeaderboardIcon = () => (
  <svg
    width="14"
    height="12"
    viewBox="0 0 14 12"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M13.9847 4.1763C13.9847 4.18318 13.9847 4.18943 13.9803 4.1963L12.5628 10.6882C12.5191 10.9168 12.3971 11.123 12.2178 11.2713C12.0385 11.4196 11.813 11.5007 11.5803 11.5007H2.41965C2.18704 11.5006 1.96173 11.4194 1.78252 11.2711C1.6033 11.1228 1.48139 10.9167 1.43778 10.6882L0.0202782 4.1963C0.0202782 4.18943 0.0171532 4.18318 0.0159032 4.1763C-0.0228922 3.96136 0.00974771 3.73964 0.108836 3.545C0.207924 3.35036 0.368011 3.19351 0.564635 3.09842C0.76126 3.00333 0.983609 2.97523 1.19771 3.01841C1.41181 3.06159 1.60588 3.17368 1.75028 3.33755L3.85465 5.60568L6.09215 0.587551C6.09226 0.585469 6.09226 0.583383 6.09215 0.581301C6.17216 0.407767 6.30022 0.260791 6.46116 0.157771C6.6221 0.0547507 6.80919 0 7.00028 0C7.19137 0 7.37846 0.0547507 7.5394 0.157771C7.70034 0.260791 7.82839 0.407767 7.9084 0.581301C7.9083 0.583383 7.9083 0.585469 7.9084 0.587551L10.1459 5.60568L12.2503 3.33755C12.395 3.1749 12.5888 3.06391 12.8023 3.02143C13.0158 2.97896 13.2374 3.00731 13.4333 3.1022C13.6292 3.19709 13.7888 3.35333 13.8879 3.54718C13.987 3.74104 14.0201 3.96193 13.9822 4.1763H13.9847Z"
      fill="#FDFDFD"
    />
  </svg>
);
const MarketplaceIcon = () => (
  <svg
    width="16"
    height="16"
    viewBox="0 0 16 16"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M14 7.50016V13.5002C14 13.6328 13.9473 13.7599 13.8536 13.8537C13.7598 13.9475 13.6326 14.0002 13.5 14.0002H2.50001C2.3674 14.0002 2.24022 13.9475 2.14645 13.8537C2.05268 13.7599 2.00001 13.6328 2.00001 13.5002V7.50016C1.99954 7.36869 2.02521 7.23844 2.07553 7.11698C2.12586 6.99552 2.19982 6.88528 2.29313 6.79266L7.29313 1.79266C7.48065 1.60527 7.7349 1.5 8.00001 1.5C8.26511 1.5 8.51936 1.60527 8.70688 1.79266L13.7069 6.79266C13.8002 6.88528 13.8742 6.99552 13.9245 7.11698C13.9748 7.23844 14.0005 7.36869 14 7.50016Z"
      fill="#FDFDFD"
    />
  </svg>
);
const CloseIcon = () => (
  <svg
    width="24"
    height="24"
    viewBox="0 0 16 16"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M12.5 3.5L3.5 12.5"
      stroke="#FDFDFD"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    />
    <path
      d="M12.5 12.5L3.5 3.5"
      stroke="#FDFDFD"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    />
  </svg>
);
const FunnelIcon = () => (
  <svg
    width="22"
    height="22"
    viewBox="0 0 20 20"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clipPath="url(#clip0_848_1087)">
      <path
        d="M5 10.625H15"
        stroke="#737373"
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
      <path
        d="M1.875 6.875H18.125"
        stroke="#737373"
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
      <path
        d="M8.125 14.375H11.875"
        stroke="#737373"
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
    </g>
    <defs>
      <clipPath id="clip0_848_1087">
        <rect width="24" height="24" fill="white" />
      </clipPath>
    </defs>
  </svg>
);
const PortfolioIcon = () => (
  <svg
    width="14"
    height="11"
    viewBox="0 0 14 11"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M13.8125 3.915C13.7197 3.78634 13.5976 3.6816 13.4563 3.60944C13.3151 3.53728 13.1586 3.49977 13 3.5H12V2.5C12 2.23478 11.8946 1.98043 11.7071 1.79289C11.5196 1.60536 11.2652 1.5 11 1.5H6.66687L4.93375 0.2C4.76036 0.0707391 4.55002 0.000625013 4.33375 0H1C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V10C0 10.1326 0.0526784 10.2598 0.146447 10.3536C0.240215 10.4473 0.367392 10.5 0.5 10.5H11.6938C11.7987 10.5 11.901 10.467 11.9861 10.4056C12.0713 10.3443 12.1349 10.2577 12.1681 10.1581L13.9487 4.81625C13.9988 4.66594 14.0126 4.50591 13.9889 4.34926C13.9652 4.19261 13.9048 4.04379 13.8125 3.915ZM4.33375 1L6.2 2.4C6.28655 2.46491 6.39181 2.5 6.5 2.5H11V3.5H2.86062C2.65073 3.49998 2.44616 3.56601 2.27588 3.68873C2.1056 3.81145 1.97825 3.98463 1.91188 4.18375L1 6.91875V1H4.33375Z"
      fill="#FDFDFD"
    />
  </svg>
);
const RewardIcon = () => (
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M18.9225 8.3086H16.882C17.174 7.89331 17.3363 7.40404 17.3492 6.90025C17.3609 6.51645 17.2922 6.13439 17.1473 5.77751C17.0024 5.42064 16.7844 5.0965 16.5068 4.82499C16.2291 4.55349 15.8976 4.34037 15.5326 4.19871C15.1676 4.05705 14.7769 3.98985 14.3843 4.00124C14.0218 4.0088 13.6648 4.08958 13.3357 4.23849C13.0066 4.3874 12.7125 4.60123 12.472 4.86656C12.2946 5.06445 12.1365 5.27819 12 5.50497C11.8635 5.27819 11.7054 5.06445 11.528 4.86656C11.2875 4.60123 10.9934 4.3874 10.6643 4.23849C10.3352 4.08958 9.97819 4.0088 9.61565 4.00124C9.22314 3.98985 8.83239 4.05705 8.4674 4.19871C8.10242 4.34037 7.77091 4.55349 7.49324 4.82499C7.21556 5.0965 6.9976 5.42064 6.85272 5.77751C6.70784 6.13439 6.63911 6.51645 6.65076 6.90025C6.66371 7.40404 6.82604 7.89331 7.11803 8.3086H5.07746C4.66019 8.3086 4.26001 8.47067 3.96496 8.75917C3.66991 9.04766 3.50415 9.43895 3.50415 9.84694V12.3083C3.50408 12.6629 3.62932 13.0067 3.85868 13.2814C4.08804 13.5561 4.40743 13.7449 4.76279 13.8159V18.4617C4.76279 18.8697 4.92855 19.2609 5.2236 19.5494C5.51866 19.8379 5.91883 20 6.3361 20H17.6639C18.0812 20 18.4813 19.8379 18.7764 19.5494C19.0714 19.2609 19.2372 18.8697 19.2372 18.4617V13.8159C19.5926 13.7449 19.912 13.5561 20.1413 13.2814C20.3707 13.0067 20.4959 12.6629 20.4958 12.3083V9.84694C20.4958 9.43895 20.3301 9.04766 20.035 8.75917C19.74 8.47067 19.3398 8.3086 18.9225 8.3086ZM18.6079 12.0006H12.944V10.1546H18.6079V12.0006ZM13.888 6.09108C13.9576 6.01551 14.0425 5.95484 14.1372 5.91288C14.232 5.87092 14.3346 5.84857 14.4386 5.84725H14.4662C14.5993 5.84688 14.7311 5.8727 14.8538 5.92316C14.9765 5.97362 15.0876 6.0477 15.1805 6.14098C15.2733 6.23427 15.346 6.34486 15.3942 6.46618C15.4425 6.5875 15.4653 6.71707 15.4613 6.84717C15.4599 6.94888 15.4371 7.04921 15.3941 7.14187C15.3512 7.23453 15.2892 7.31751 15.2119 7.38559C14.6691 7.85633 13.7763 8.09785 13.0384 8.21322C13.1564 7.49481 13.4034 6.62181 13.888 6.09108ZM8.82979 6.13184C9.01652 5.95122 9.26804 5.8491 9.53069 5.84725H9.56137C9.66539 5.84857 9.76801 5.87092 9.86277 5.91288C9.95753 5.95484 10.0424 6.01551 10.112 6.09108C10.5935 6.62181 10.8405 7.49405 10.9577 8.21476C10.2261 8.09861 9.32538 7.85709 8.78809 7.38559C8.71081 7.31751 8.64876 7.23453 8.60584 7.14187C8.56293 7.04921 8.54008 6.94888 8.53873 6.84717C8.53525 6.71489 8.55925 6.58329 8.60927 6.46034C8.6593 6.33739 8.73432 6.22563 8.82979 6.13184ZM5.39212 10.1546H11.056V12.0006H5.39212V10.1546ZM6.65076 13.8466H11.056V18.154H6.65076V13.8466ZM12.944 18.154V13.8466H17.3492V18.154H12.944Z"
      fill="black"
    />
  </svg>
);

export default function MobileMenuButton() {
  const [isOpen, setIsOpen] = useState(false);
  const account = useAppKitAccount();
  const { data } = useUnclaimedCampaigns(account?.address);
  const haveRewards = data && data.length > 0;
  return (
    <div className="relative md:hidden">
      {!isOpen ? null : (
        <div className="absolute bottom-[64px] right-0 z-[9999] flex h-[254px] w-40 flex-col items-end justify-end gap-2">
          <SimpleClaimAllButton />
          <ReferralButton />
          <Link href={"/v1/leaderboard"}>
            <Button title="Leaderboard" icon={<LeaderboardIcon />} />
          </Link>
          <Link href={"/v1/portfolio"}>
            <Button title="Portfolio" icon={<PortfolioIcon />} />
          </Link>
          <Link href={"/"}>
            <Button title="Marketplace" icon={<MarketplaceIcon />} />
          </Link>
        </div>
      )}
      {haveRewards && !isOpen ? (
        <div className="absolute -right-1 -top-1 size-4 rounded-full bg-red-500" />
      ) : null}
      <Button
        intent={isOpen ? "cta" : haveRewards ? "reward" : "inverted"}
        onClick={() => setIsOpen(!isOpen)}
      >
        {isOpen ? <CloseIcon /> : haveRewards ? <RewardIcon /> : <FunnelIcon />}
      </Button>
    </div>
  );
}
